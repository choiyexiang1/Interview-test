{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\ethan\\\\Desktop\\\\SpaceX_Test\\\\pages\\\\histories\\\\[id].js\";\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n                        query GET_HISTORY {\\n                            histories {\\n                                title\\n                                event_date_utc\\n                                details\\n                                flight {\\n                                    rocket {\\n                                        rocket {\\n                                            id\\n                                            name\\n                                        }\\n                                    }\\n                                }\\n                            }  \\n                            rocket(id: \\\"\", \"\\\") {\\n                                name\\n                            }\\n                        }\\n                    \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/router';\nimport gql from \"graphql-tag\";\nimport Head from 'next/head';\nimport Layout, { client } from '../../components/Layout';\nimport Loader from '../../components/Loader';\n\nvar history = function history() {\n  var _useState = useState([]),\n      histories = _useState[0],\n      setHistories = _useState[1];\n\n  var _useState2 = useState({}),\n      rocket = _useState2[0],\n      setRocket = _useState2[1];\n\n  var _useState3 = useState(true),\n      isLoading = _useState3[0],\n      setIsLoading = _useState3[1];\n\n  var _useState4 = useState(null),\n      id = _useState4[0],\n      setId = _useState4[1];\n\n  var _useRouter = useRouter(),\n      query = _useRouter.query;\n\n  useEffect(function () {\n    setId(query.id);\n\n    if (id) {\n      client.query({\n        query: gql(_templateObject(), id)\n      }).then(function (result) {\n        console.log(result);\n        setIsLoading(false);\n        setHistories(result.data.histories);\n        setRocket(result.data.rocket);\n      });\n    }\n  }, [query, id]); // console.log(id)\n  // console.log(histories)\n  // console.log(rocket)\n  // Filter out histories don't have flight\n\n  var filterHistory = histories.filter(function (history) {\n    return history.flight;\n  }); // console.log(filterHistory)\n  // Filter out id not same with this page\n\n  var rocketHistory = filterHistory.filter(function (history) {\n    return history.flight.rocket.rocket.id == \"\".concat(id);\n  }); // console.log(rocketHistory)\n  //change date format\n\n  var changeDate = function changeDate(x) {\n    var event = new Date(x);\n    var formatted_date = event.getDate() + \"-\" + (event.getMonth() + 1) + \"-\" + event.getFullYear();\n    return formatted_date;\n  };\n\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, isLoading ? __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 19\n    }\n  }, __jsx(\"div\", {\n    style: {\n      backgroundColor: 'black',\n      height: '92vh'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }\n  }, __jsx(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 25\n    }\n  }))) : __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, __jsx(Head, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, __jsx(\"title\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 25\n    }\n  }, rocket.name, \" Histories | SpaceX\")), __jsx(\"section\", {\n    \"class\": \"section\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    \"class\": \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 25\n    }\n  }, __jsx(\"h1\", {\n    \"class\": \"title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 29\n    }\n  }, \"Histories \", rocket.name), rocketHistory.map(function (history) {\n    return __jsx(\"article\", {\n      \"class\": \"message is-dark\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 33\n      }\n    }, __jsx(\"div\", {\n      \"class\": \"message-body\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 37\n      }\n    }, __jsx(\"h1\", {\n      \"class\": \"title\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 41\n      }\n    }, history.title), __jsx(\"h2\", {\n      \"class\": \"subtitle\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 41\n      }\n    }, changeDate(history.event_date_utc)), __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 41\n      }\n    }, history.details)));\n  })))));\n};\n\nexport default history;","map":{"version":3,"sources":["C:/Users/ethan/Desktop/SpaceX_Test/pages/histories/[id].js"],"names":["useEffect","useState","useRouter","gql","Head","Layout","client","Loader","history","histories","setHistories","rocket","setRocket","isLoading","setIsLoading","id","setId","query","then","result","console","log","data","filterHistory","filter","flight","rocketHistory","changeDate","x","event","Date","formatted_date","getDate","getMonth","getFullYear","backgroundColor","height","name","map","title","event_date_utc","details"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/router'\r\nimport gql from \"graphql-tag\";\r\nimport Head from 'next/head';\r\n\r\nimport Layout, { client } from '../../components/Layout';\r\nimport Loader from '../../components/Loader';\r\n\r\nconst history = () => {\r\n\r\n    const [histories, setHistories] = useState([])\r\n    const [rocket, setRocket] = useState({})\r\n    const [isLoading, setIsLoading] = useState(true)\r\n\r\n    const [id, setId] = useState(null)\r\n    const { query } = useRouter()\r\n\r\n    useEffect(() => {\r\n        setId(query.id)\r\n        if (id) {\r\n            client\r\n                .query({\r\n                    query: gql`\r\n                        query GET_HISTORY {\r\n                            histories {\r\n                                title\r\n                                event_date_utc\r\n                                details\r\n                                flight {\r\n                                    rocket {\r\n                                        rocket {\r\n                                            id\r\n                                            name\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }  \r\n                            rocket(id: \"${id}\") {\r\n                                name\r\n                            }\r\n                        }\r\n                    `\r\n                })\r\n                .then(result => {\r\n                    console.log(result)\r\n                    setIsLoading(false)\r\n                    setHistories(result.data.histories)\r\n                    setRocket(result.data.rocket)\r\n                });\r\n        }\r\n    }, [query, id])\r\n    // console.log(id)\r\n    // console.log(histories)\r\n    // console.log(rocket)\r\n\r\n    // Filter out histories don't have flight\r\n    const filterHistory = histories.filter(history => {\r\n        return (history.flight)\r\n    });\r\n    // console.log(filterHistory)\r\n\r\n    // Filter out id not same with this page\r\n    const rocketHistory = filterHistory.filter(history => {\r\n        return (history.flight.rocket.rocket.id == `${id}`)\r\n    });\r\n    // console.log(rocketHistory)\r\n\r\n    //change date format\r\n    const changeDate = (x) => {\r\n        const event = new Date(x);\r\n        let formatted_date = event.getDate() + \"-\" + (event.getMonth() + 1) + \"-\" + event.getFullYear()\r\n        return formatted_date\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {isLoading\r\n                ? <Layout>\r\n                    <div style={{ backgroundColor: 'black', height: '92vh' }}>\r\n                        <Loader />\r\n                    </div>\r\n                </Layout>\r\n                :\r\n                <Layout>\r\n                    <Head>\r\n                        <title>{rocket.name} Histories | SpaceX</title>\r\n                    </Head>\r\n                    <section class=\"section\">\r\n                        <div class=\"container\">\r\n                            <h1 class=\"title\">Histories {rocket.name}</h1>\r\n                            {rocketHistory.map(history => (\r\n                                <article class=\"message is-dark\">\r\n                                    <div class=\"message-body\">\r\n                                        <h1 class=\"title\">{history.title}</h1>\r\n                                        <h2 class=\"subtitle\">{changeDate(history.event_date_utc)}</h2>\r\n                                        <p>{history.details}</p>\r\n                                    </div>\r\n                                </article>\r\n                            ))}\r\n                        </div>\r\n                    </section>\r\n                </Layout>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default history"]},"metadata":{},"sourceType":"module"}