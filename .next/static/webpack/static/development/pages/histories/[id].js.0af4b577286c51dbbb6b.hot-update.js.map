{"version":3,"file":"static/webpack/static\\development\\pages\\histories\\[id].js.0af4b577286c51dbbb6b.hot-update.js","sources":["webpack:///./pages/histories/.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/router'\r\nimport gql from \"graphql-tag\";\r\nimport Head from 'next/head';\r\nimport Link from 'next/link';\r\n\r\nimport Layout, { client } from '../../components/Layout';\r\nimport Loader from '../../components/Loader';\r\n\r\nconst history = () => {\r\n\r\n    const [histories, setHistories] = useState([])\r\n    const [isLoading, setIsLoading] = useState(true)\r\n\r\n    const [id, setId] = useState(null)\r\n    const { query } = useRouter()\r\n\r\n    useEffect(() => {\r\n        setId(query.id)\r\n\r\n        if (id) {\r\n            client\r\n                .query({\r\n                    query: gql`\r\n                        query GET_HISTORY {\r\n                            histories {\r\n                              event_date_utc\r\n                              details\r\n                              flight {\r\n                                rocket {\r\n                                  rocket {\r\n                                    id\r\n                                  }\r\n                                }\r\n                              }\r\n                            }\r\n                          }\r\n                    `\r\n                })\r\n                .then(result => {\r\n                    console.log(result)\r\n                    setIsLoading(false)\r\n                    setHistories(result.data.histories)\r\n                });\r\n        }\r\n    }, [query, id])\r\n\r\n    // console.log(id)\r\n    // console.log(histories)\r\n\r\n    // Filter out histories don't have flight\r\n    const filterHistory = histories.filter(history => {\r\n        return (history.flight)\r\n    });\r\n    console.log(filterHistory)\r\n\r\n    // Filter out id not same with this page\r\n    const rocketHistory = filterHistory.filter(history => {\r\n        return (history.flight.rocket.rocket.id == `${id}`)\r\n    });\r\n    console.log(rocketHistory)\r\n\r\n    return (\r\n        <div>\r\n            {isLoading\r\n                ? <Layout>\r\n                    <div style={{ backgroundColor: 'black', height: '92vh' }}>\r\n                        <Loader />\r\n                    </div>\r\n                </Layout>\r\n                :\r\n                <Layout>\r\n\r\n                </Layout>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default history"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AAOA;AACA;AACA;AACA;AACA;AAEA;AADA;AAkBA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;;;;A","sourceRoot":""}